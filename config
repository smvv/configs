#!/bin/bash -e

if [ $# -lt 1 ] || [ $# -gt 2 ]; then
    echo "Usage: $0 PROFILE [CONFIG_DIR]"
    exit -1
fi

# Switch script's directory
cd `dirname "$0"`

PROFILE="$1"
CONFIG_DIR=~/.config
if [ $# -eq 2 ]; then CONFIG_DIR="$2"; fi

# Create symbolic links targeting the configuration directories.
for f in awesome/; do
    [ ! -d "${CONFIG_DIR}/$f" ] \
        && echo ln -is "`pwd`/${PROFILE}/dotconfig/$f" "${CONFIG_DIR}/$f"
done

for f in .emacs.d .emacs .gvimrc .vim .vimrc ; do
    ln -is "`pwd`/${PROFILE}/$f" "`echo ~`/$f"
done

for f in make.conf; do
    ln -is "`pwd`/${PROFILE}/etc/$f" "/etc/$f"
done

for f in elipslint clip2goog clip2firefox; do
    sudo ln -is "`pwd`/${PROFILE}/usr/bin/$f" "/usr/bin/$f"
done

